<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>New year game</title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.js"></script>

    <!-- <link rel="stylesheet" type="text/css" href="css\main.css"> -->
   </head>
    <html>
        <body>
          
          <div id="app">
            <h1>{{ quiz.title }}</h1>
            <!-- index is used to check with current question index -->
            <div v-for="(question, index) in quiz.questions">
              <!-- Hide all questions, show only the one with index === to current question index -->
              <div v-show="index === questionIndex">
                <h2>{{ question.text }}</h2>
                <ol>
                  <li v-for="response in question.responses">
                    <label>
                      <!-- The radio button has three new directives -->
                      <!-- v-bind:value sets "value" to "true" if the response is correct -->
                      <!-- v-bind:name sets "name" to question index to group answers by question -->
                      <!-- v-model creates binding with userResponses -->
                      <input type="radio" 
                             v-bind:value="response.correct" 
                             v-bind:name="index" 
                             v-model="userResponses[index]"> {{response.text}}
                    </label>
                  </li>
                </ol>
                <!-- The two navigation buttons -->
                <!-- Note: prev is hidden on first question -->
                <button v-if="questionIndex > 0" v-on:click="prev">
                  prev
                </button>
                <button v-on:click="next">
                  next
                </button>
              </div>
            </div>
            <div v-show="questionIndex === quiz.questions.length">
              <h2>
              Quiz finished
            </h2>
              <p>
                Total score: {{ score() }} / {{ quiz.questions.length }}
              </p>
            </div>
          </div>
          
          <!-- Load Vue script -->
          <script src="https://vuejs.org/js/vue.js"></script>
          <!-- On load, init Vue -->
          <script>
            window.onload=function(){
              // Create a quiz object with a title and two questions.
              // A question has one or more answer, and one or more is valid.
              var quiz = {
                title: 'My quiz',
                questions: [
                  {
                    text: "Question 1",
                    responses: [
                      {text: 'Wrong, too bad.'}, 
                      {text: 'Right!', correct: true}, 
                    ]
                  }, {
                    text: "Question 2",
                    responses: [
                      {text: 'Right answer', correct: true}, 
                      {text: 'Wrong answer'}, 
                    ]
                  } 
                ]
              };
                    
              new Vue({
                el: '#app',
                data: {
                  quiz: quiz,
                  // Store current question index
                  questionIndex: 0,
                  // An array initialized with "false" values for each question
                  // It means: "did the user answered correctly to the question n?" "no".
                  userResponses: Array(quiz.questions.length).fill(false)
                },
                // The view will trigger these methods on click
                methods: {
                  // Go to next question
                  next: function() {
                    this.questionIndex++;
                  },
                  // Go to previous question
                  prev: function() {
                    this.questionIndex--;
                  },
                  // Return "true" count in userResponses
                  score: function() {
                    return this.userResponses.filter(function(val) { return val }).length;
                  }
                }
              });
            }
          </script>
        </body>